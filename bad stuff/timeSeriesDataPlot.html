<!--time series data 
with proper label, legend and unit on axis
different color for different sensor streams-->


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Plot</title>
	<link href="flot.css" rel="stylesheet" type="text/css">
	<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../../excanvas.min.js"></script><![endif]-->
	<script language="jaascript" type="text/javascript" src="flot/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="flot/jquery.flot.js"></script>
	<script language="javascript" type="text/javascript" src="flot/jquery.flot.axislabels.js"></script>
	<script language="javascript" type="text/javascript" src="flot/jquery.flot.resize.js"></script>
	<script language="javascript" type="text/javascript" src="flot/jquery.flot.time.js"></script>
	<script type="text/javascript">

	$(function() {


		// var d1 = [];
		// for (var i = 0; i < 14; i += 0.5) {
		// 	d1.push([i, Math.sin(i)]);
		// }
		 //var json = some inputted JSON object
		 
        var json = '{ "data" : [' +
            '{ "time":"2000-01-01T05:00:00" , "value":3},' +
            '{ "time":"2000-01-01T06:30:00", "value":8},' +
            '{ "time":"2000-01-01T11:15:00" , "value":5},' +
            '{ "time":"2000-01-01T22:00:00" , "value":13},' +
            '{ "time":"2000-01-02T05:00:00" , "value":4}]}';

        var obj = JSON.parse(json);

        var d1 = [];
        for (var i = 0; i < obj.data.length; i++) {
        	var cur = [];
        	cur.push(new Date(obj.data[i].time).getTime());
        	cur.push(obj.data[i].value);
        	d1.push(cur);
        }

	/*var d1 = [[(new Date("2000-01-01T05:00:00")).getTime(), 3], [(new Date("2000-01-01T06:30:00")).getTime(), 8], [(new Date("2000-01-01T11:15:00")).getTime(), 5], [(new Date("2000-01-01T22:00:00")).getTime(), 13], [(new Date("2000-01-02T05:00:00")).getTime(), 4]];*/

		var d2 = [[(new Date("2000-01-01T05:00:00")).getTime(), 6], [(new Date("2000-01-01T06:30:00")).getTime(), 9], [(new Date("2000-01-01T11:15:00")).getTime(), 9], [(new Date("2000-01-01T22:00:00")).getTime(), 10], [(new Date("2000-01-02T05:00:00")).getTime(), 8]];


		// A null signifies separate line segments

		//var d3 = [[0, 12], [7, 12], null, [7, 2.5], [12, 2.5]];

		//$.plot("#placeholder", [ d1, d2, d3 ]);
		$.plot("#placeholder", [ 
				{ label: "Series 1", data: d1}, 
				{ label: "Series 2", data: d2}
			], {
			series: {
				lines: { show: true },
				points: { show: true }
			},
			xaxis: {
				mode:"time",
				tickSize: [2, "hour"],
                // min: (new Date("2000/01/01")).getTime(),
                // max: (new Date("2000/01/02")).getTime(),
				axisLabel: "Timestamp",
			    axisLabelUseCanvas: true,
			    axisLabelFontSizePixels: 12,
			    axisLabelFontFamily: 'Verdana, Arial',
			    axisLabelPadding: 5
			},
			yaxis: {
				ticks: 10,
				tickDecimals: 3,
				axisLabel: "Sensor Values",
			    axisLabelUseCanvas: true,
			    axisLabelFontSizePixels: 12,
			    axisLabelFontFamily: 'Verdana, Arial',
			    axisLabelPadding: 5
			},
			grid: {
				backgroundColor: { colors: [ "#fff", "#eee" ] },
				borderWidth: {
					top: 1,
					right: 1,
					bottom: 2,
					left: 2
				}
			}
		});

		$(window).resize(function() {

		    // redraw the graph in the correctly sized div
			$.plot("#placeholder", [ 
				{ label: "Series 1", data: d1}, 
				{ label: "Series 2", data: d2}
				], {
				series: {
					lines: { show: true },
					points: { show: true }
				},
				xaxis: {
					mode:"time",
					tickSize: [1, "hour"],
	                min: (new Date("2000/01/01")).getTime(),
	                max: (new Date("2000/01/02")).getTime(),
					axisLabel: "Timestamp",
				    axisLabelUseCanvas: true,
				    axisLabelFontSizePixels: 12,
				    axisLabelFontFamily: 'Verdana, Arial',
				    axisLabelPadding: 5
				},
				yaxis: {
					ticks: 10,
					min: -2,
					max: 15,
					tickDecimals: 3,
					axisLabel: "Sensor Values",
				    axisLabelUseCanvas: true,
				    axisLabelFontSizePixels: 12,
				    axisLabelFontFamily: 'Verdana, Arial',
				    axisLabelPadding: 5
				},
				grid: {
					backgroundColor: { colors: [ "#fff", "#eee" ] },
					borderWidth: {
						top: 1,
						right: 1,
						bottom: 2,
						left: 2
					}
				}
			});
		});
		// Add the Flot version string to the footer

		//$("#footer").prepend("Flot " + $.plot.version + " &ndash; ");
	});

	</script>
</head>
<body>

	<div id="header">
		<h2>Sensor Data</h2>
	</div>

	<div id="content">

		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>

</body>
</html>