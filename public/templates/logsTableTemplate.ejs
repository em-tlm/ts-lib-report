<!---
event log (a list of events)
each event has timestamp, related tslink's name, username (email) and an unstructured  data field. 
system log (think about /var/authlog in linux)
-->

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

</head>
<body>

 <script>
    
   // var obj = getData();

        var sPageURL = window.location.search.substring(1);
        var sURLVariables = sPageURL.split('&');
        var params = sURLVariables[0].split('=');
        
        console.log(params[1]);
        var json = JSON.stringify(params[1]);
        console.log(json);
        
        var obj = JSON.parse(json);
        console.log(typeof obj[1]);

    // var obj = [{Timestamp:"12:00:01",TSLink:"TS-Link0",Username:"user-name0",Event:"event-0"}];
    // console.log(obj);
        
        //var json = some inputted JSON object
        // var json = '[' +
            // '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link0" , "Username":"user-name0" , "Event":"event-0"},' +
            // '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link1" , "Username":"user-name1" , "Event":"event-1"},' +
            // '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link2" , "Username":"user-name2" , "Event":"event-2"},' +
            // '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
            // '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
            // '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
            // '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:08" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:09" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:08" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:09" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:08" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:09" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:08" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:09" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:08" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:09" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:08" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:09" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:01" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:02" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:03" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:04" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:05" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:06" , "TSLink":"TS-Link3" , "Username":"user-name3" , "Event":"event-3"},' +
        //     '{ "Timestamp":"12:00:07" , "TSLink":"TS-Link4" , "Username":"user-name4" , "Event":"event-4"} ]';

        //var obj = JSON.parse(json);

        // var obj = could be some array
        
        </script>

<div align="middle" class="container" width="60%">
  <h1 align="middle"> <font face="Arial" size="5" color="black"><b>Event Log</b></font></h1>   
  <div class="bodycontainer scrollable"> 
  <table class="table table-striped header-fixed table-scrollable" id="table">

    <!-- assuming the same for all event logs -->
    <thead id="head">

      <script> 
      //var obj = rawdata;
     // var obj = getData();
      // console.log("HER");
      // console.log("obj: " + obj);
        // build table head
        var head = document.getElementById("head");
        var arr = Object.keys(obj[0]); // keys from table
        tr = document.createElement('tr');
        for (var j = 0; j < arr.length; j++) {
          th = document.createElement('th');
          th.appendChild(document.createTextNode(arr[j])); 
          tr.appendChild(th);
        }
        head.appendChild(tr);
        document.getElementById("table").appendChild(head);

      </script>
    
   </thead>

    <tbody id="body" style="overflow-y: auto">

      

      <script>
      //var obj = getData();
        // var obj = getData();
        // build table body 
        var body = document.getElementById("body");
        for (var i = 0; i < obj.length; i++) { // for each object
          tr = document.createElement('tr'); // for each key
          for (var j = 0; j < arr.length; j++) {
            td = document.createElement('td');
            td.appendChild(document.createTextNode(obj[i][arr[j]]));
            tr.appendChild(td);
          }
           body.appendChild(tr);
        }

        document.getElementById("table").appendChild(body);
                  
      </script>

    </tbody>
  </table>
  </div>
</div>

</body>

<style>
</style>
</html>
